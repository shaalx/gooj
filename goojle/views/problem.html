{{template "header.html" .}}
<style type="text/css">
  .hecker{
    color: #00FF00;
    background-color:#000;
    font-size:14px;
  }
</style>
<div class="container" style="background-color:#eee;padding:10px 0px 0px 0px">
	<div class="col-md-7">			
		<div class="content">
			<form id="problem-form" action="/oj/{{.problem.Id}}" method="post">
				<input type="hidden" name="fid" value="{{.problem.Id}}">
				<input type="hidden" name="fname" value="{{.problem.FuncName}}">
				<input type="hidden" name="rid" value="{{.rid}}">
				<textarea id="problem-content" name="problem" cols="70" rows="15">{{.problem.Content}}</textarea>
			</form>
		</div>
	</div>
	<div class="col-md-5">
		<label id="submit-btn" style="background-color:#aaa;padding:10px 8px;">commit</label><br>
		<textarea id="problem-result" style="color: #00FF00;background-color:#000;font-size:14px;display:none" cols="260" rows="8" class=".hecker form-control" readonly="true"></textarea> 
		<!-- <span id="rawContent">{{.problem.Desc}}</span> -->
		<span id="markdownContent"></span>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function (argument) {
		function CallbackFunc (data){
		}
		$.ajax({  
	        type : "get",  
	        url : "http://182.254.132.59/markdownCB?callback=?",
	        dataType:"jsonp",
        	jsonpCallback:"CallbackFunc",
        	data:{"rawContent":{{.problem.Desc}}},
	        success : function(data){
	            $("#markdownContent").html(data.mddata);
	        	console.log(data.mddata);
	        },  
	        error:function(){  
	            alert('fail');  
	        }
	    });
		$("#submit-btn").click(function (argument) {
			$("#problem-result").text("");
			// body...
			$.ajax({
				 url: '/oj/{{.problem.Id}}',
				 type: 'POST',
				 data:{"fid":"{{.problem.Id}}","fname":"{{.problem.FuncName}}","rid":"{{.rid}}","problem":$("#problem-content").val()},
				 success: function(result) {
				  	$("#problem-result").text(result);
				  	// $("#submit-btn").css("display","none");
				  	console.log(result);
				 }
			});
			$("#problem-result").css("display","inline");
		});
	});
</script>
{{template "footer.html" .}}